<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheduler</title>
    <script>
        (function(){
            function doWork(){
                var totalIterations = 1000,
                    currentIteration = 0;
                
                    function oneIteration(){
                        for(var i = 0; i < (10000/totalIterations); i++)
                            for(var j = 0; j < 1000; j++)
                                for(var k = 0; k < 1000; k++){
                                }
                        ++currentIteration;
                        if (currentIteration < totalIterations){
                            setTimeout(oneIteration)
                        } else {
                            console.log('Task completed!')
                        }
                    }
                    oneIteration()
            }

            function displayMessage(msg){
                document.getElementById('divMessages').innerHTML += msg + '<br/>'
            }
            
            function onBtnDoWorkClick(){
                displayMessage('Work Started!'); // dom updated but screen not repainted
                setTimeout(function(){
                        doWork();
                        displayMessage('Work Completed') // dom updated but screen not repainted
                }) // schedule the execution of 22&23 through the queue
            }
            function onDocumentLoad(){
                var btnDoWork = document.getElementById('btnDoWork');
                btnDoWork.addEventListener('click', onBtnDoWorkClick)
            }
            window.addEventListener('load', onDocumentLoad)
        })()
    </script>
</head>
<body>
    <h1>Scheduler</h1>
    <input type="text" name="" id="">
    <button id="btnDoWork">Do Work</button>
    <div id="divMessages"></div>
</body>
</html>